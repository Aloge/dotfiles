---
- name: Run task dependencies for uninstall Atom app
  include_tasks: "{{ playbook_dir }}/lib/dependencies/{{ item }}.yml"
  loop:
    - os_is_mac
    - homebrew_is_installed

- block:
    - name: Ensure absence of Atom app
      homebrew_cask:
        name: atom
        state: absent
        install_options: force
      when: homebrew_is_installed

    - name: Ensure absence of files generated by Atom
      file:
        path: '{{ item }}'
        state: absent
      loop:
        - ~/.atom
        - ~/Library/Application Support/ShipIt_stderr.log
        - ~/Library/Application Support/Atom
        - ~/Library/Application Support/ShipIt_stdout.log
        - ~/Library/Application Support/com.github.atom.ShipIt
        - ~/Library/Caches/com.github.atom
        - ~/Library/Preferences/com.github.atom.plist
  when: os_is_mac
